{"version":3,"sources":["components/AppHeader/AppHeader.module.css","components/Login/Login.module.css","stores/User.ts","helpers/JsonSafe.ts","helpers/LocalStorageSafe.ts","components/User/User.tsx","components/AppHeader/AppHeader.tsx","helpers/StoreHelper.ts","helpers/AsyncHelper.ts","stores/Courses.ts","components/Courses/Courses.tsx","components/Login/Login.tsx","components/IndexPage/IndexPage.tsx","components/NotFound/NotFound.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/User/User.module.css","components/Courses/Courses.module.css","App.module.css"],"names":["module","exports","UserType","JsonSafe","text","reviver","JSON","parse","value","replacer","space","stringify","LocalStorageSafe","key","item","localStorage","getItem","setItem","UserStore","api","login","password","axios","post","res","data","checkLogin","user","makeAutoObservable","this","setUser","User","observer","className","styles","email","logOutButton","onClick","navigate","AppHeader","appHeader","to","WithLoadingFlags","action","isLoading","isLoaded","hasError","console","error","load","AsyncHelper","time","Promise","resolve","setTimeout","CoursesStore","loadList","name","description","list","Courses","useEffect","loadIfNotLoaded","courses","map","course","index","Login","values","a","statusText","response","errorText","status","message","loginWrapper","labelCol","span","wrapperCol","onFinish","Item","label","rules","required","Password","offset","type","htmlType","IndexPage","noThrow","NotFound","App","setCheckLogin","app","router","path","default","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","reportWebVitals","configure","reactionScheduler","f","enforceActions","defaults","baseURL","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.00cd1b84.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"appHeader\":\"AppHeader_appHeader__1rCT3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginWrapper\":\"Login_loginWrapper__2rzG3\"};","import axios from 'axios';\nimport { makeAutoObservable } from 'mobx';\nimport { LocalStorageSafe } from 'src/helpers/LocalStorageSafe';\n\nenum UserType {\n    student = 'student',\n    teacher = 'teacher',\n}\nexport type IUser = {\n    id: string;\n    login: string;\n    firstName: string;\n    lastName: string;\n    email: string;\n    type: UserType;\n};\nfunction getApi() {\n    return {\n        async login({ login, password }: { login: string; password: string }) {\n            const res = await axios.post<IUser>('/api/login/', {\n                login,\n                password,\n            });\n            return res.data;\n        },\n    };\n}\n\nclass UserStoreClass {\n    api = getApi();\n    checkLogin = false;\n    user: IUser | null = null;\n\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    setUser(user: IUser | null) {\n        this.user = user;\n        LocalStorageSafe.setItem('user', this.user);\n    }\n\n    setCheckLogin() {\n        this.checkLogin = true;\n    }\n\n    async login({ login, password }: { login: string; password: string }) {\n        const user = await this.api.login({ login, password });\n        this.setUser(user);\n    }\n}\n\nexport const UserStore = new UserStoreClass();\n","export const JsonSafe = {\n    parse<T = unknown>(\n        text: string,\n        reviver?: (this: T, key: string, value: T) => T,\n    ): T | null {\n        try {\n            return JSON.parse(text, reviver) as T;\n        } catch {\n            return null;\n        }\n    },\n\n    stringify<T = unknown>(\n        value: T,\n        replacer?: (this: T, key: string, value: T) => T,\n        space?: string | number,\n    ): string {\n        try {\n            return JSON.stringify(value, replacer, space) || '';\n        } catch {\n            return '';\n        }\n    },\n};\n","import { JsonSafe } from './JsonSafe';\n\nexport const LocalStorageSafe = {\n    getItem<T = unknown>(key: string): T | null {\n        try {\n            const item = localStorage.getItem(key);\n            if (item === null) {\n                return item;\n            }\n            return JsonSafe.parse<T>(item);\n        } catch {\n            return null;\n        }\n    },\n\n    setItem<T = unknown>(key: string, item: T) {\n        try {\n            localStorage.setItem(key, JsonSafe.stringify(item));\n        } catch {}\n    },\n};\n","import React from 'react';\nimport styles from 'src/components/User/User.module.css';\nimport { observer } from 'mobx-react-lite';\nimport { UserStore } from 'src/stores/User';\nimport { Button } from 'antd';\nimport { navigate } from '@reach/router';\n\nfunction _User() {\n    const user = UserStore.user;\n\n    function onLogOut() {\n        UserStore.setUser(null);\n        navigate('/');\n    }\n\n    return (\n        <div className={styles.user}>\n            <div className={styles.email}>{user?.email}</div>\n            <Button className={styles.logOutButton} onClick={onLogOut}>\n                Выйти\n            </Button>\n        </div>\n    );\n}\n\nexport const User = observer(_User);\n","import { Link } from '@reach/router';\nimport React from 'react';\nimport styles from 'src/components/AppHeader/AppHeader.module.css';\nimport { UserStore } from 'src/stores/User';\nimport { observer } from 'mobx-react-lite';\nimport { User } from 'src/components/User/User';\n\nfunction _AppHeader() {\n    if (!UserStore.user) {\n        return null;\n    }\n\n    return (\n        <div className={styles.appHeader}>\n            <Link to=\"/courses\">Курсы</Link>\n\n            <User />\n        </div>\n    );\n}\n\nexport const AppHeader = observer(_AppHeader);\n","import { makeAutoObservable } from 'mobx';\n\nexport class WithLoadingFlags<Result = unknown> {\n    isLoading = true;\n    isLoaded = false;\n    hasError = false;\n    // @ts-ignore\n    data: Result;\n    action: () => Promise<Result>;\n\n    constructor(action: () => Promise<Result>) {\n        this.action = action;\n        makeAutoObservable(this);\n    }\n\n    async load() {\n        try {\n            this.isLoading = true;\n            this.data = await this.action();\n            this.hasError = false;\n        } catch (error) {\n            console.error(error);\n            this.hasError = true;\n        } finally {\n            this.isLoaded = true;\n            this.isLoading = false;\n        }\n    }\n\n    loadIfNotLoaded() {\n        if (!this.isLoaded) {\n            this.load();\n        }\n    }\n}\n","export const AsyncHelper = {\n    delay(time: number) {\n        return new Promise((resolve) => {\n            setTimeout(resolve, time);\n        });\n    },\n};\n","import { WithLoadingFlags } from 'src/helpers/StoreHelper';\nimport { AsyncHelper } from 'src/helpers/AsyncHelper';\n\nfunction getApi() {\n    return {\n        async loadList() {\n            await AsyncHelper.delay(1000);\n            return [\n                {\n                    name: 'Курс по PHP',\n                    description: 'php ето не сила',\n                },\n                {\n                    name: 'Курс по JS',\n                    description: 'js ето сила',\n                },\n                {\n                    name: 'Курс по C',\n                    description: 'C ето немножко сила',\n                },\n            ];\n        },\n    };\n}\n\ntype Course = {\n    name: string;\n    description: string;\n};\nclass CoursesStoreClass {\n    api = getApi();\n    list = new WithLoadingFlags<Course[]>(this.api.loadList);\n}\n\nexport const CoursesStore = new CoursesStoreClass();\n","import React, { useEffect } from 'react';\nimport styles from 'src/components/Courses/Courses.module.css';\nimport { CoursesStore } from 'src/stores/Courses';\nimport { observer } from 'mobx-react-lite';\nimport { RouteComponentProps } from '@reach/router';\n\nfunction _Courses() {\n    useEffect(() => {\n        CoursesStore.list.loadIfNotLoaded();\n    }, []);\n\n    if (CoursesStore.list.isLoading) {\n        return <>загрузка</>;\n    }\n\n    if (CoursesStore.list.hasError) {\n        return <>ошибка</>;\n    }\n\n    return (\n        <div className={styles.courses}>\n            {CoursesStore.list.data.map((course, index) => {\n                return (\n                    <div key={index} className={styles.course}>\n                        <div>{course.name}</div>\n                        <div className={styles.description}>\n                            {course.description}\n                        </div>\n                    </div>\n                );\n            })}\n        </div>\n    );\n}\n\nexport const Courses = observer<RouteComponentProps>(_Courses);\n","import React, { useEffect } from 'react';\nimport styles from 'src/components/Login/Login.module.css';\nimport { Form, Input, Button, message } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport { navigate, RouteComponentProps } from '@reach/router';\nimport { UserStore } from 'src/stores/User';\n\ntype Values = {\n    login: string;\n    password: string;\n};\n\nfunction _Login() {\n    useEffect(() => {\n        if (UserStore.user) {\n            navigate('/');\n        }\n    }, [UserStore.user]);\n\n    async function onFinish(values: Values) {\n        try {\n            await UserStore.login(values);\n        } catch (error) {\n            const statusText = error?.response.statusText;\n            const errorText =\n                error?.response.status === 401\n                    ? 'Пользователь не найден'\n                    : statusText;\n            message.error(`Не удалось войти. ${errorText}`);\n        }\n    }\n\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    };\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 16 },\n    };\n\n    return (\n        <div className={styles.loginWrapper}>\n            <Form {...layout} name=\"basic\" onFinish={onFinish}>\n                <Form.Item\n                    label=\"Login\"\n                    name=\"login\"\n                    rules={[\n                        {\n                            required: true,\n                            message: 'Введите login',\n                        },\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item\n                    label=\"Пароль\"\n                    name=\"password\"\n                    rules={[\n                        {\n                            required: true,\n                            message: 'Введите пароль',\n                        },\n                    ]}\n                >\n                    <Input.Password />\n                </Form.Item>\n                <Form.Item {...tailLayout}>\n                    <Button type=\"primary\" htmlType=\"submit\">\n                        Войти\n                    </Button>\n                </Form.Item>\n            </Form>\n        </div>\n    );\n}\n\nexport const Login = observer<RouteComponentProps>(_Login);\n","import { Redirect, RouteComponentProps } from '@reach/router';\nimport React from 'react';\nimport { UserStore } from 'src/stores/User';\nimport { observer } from 'mobx-react-lite';\nimport { Spin } from 'antd';\n\nfunction _IndexPage() {\n    if (!UserStore.checkLogin) {\n        return <Spin />;\n    }\n    if (UserStore.checkLogin && !UserStore.user) {\n        return <Redirect to={'/login'} noThrow />;\n    }\n\n    return <Redirect to={'/courses'} noThrow />;\n}\n\nexport const IndexPage = observer<RouteComponentProps>(_IndexPage);\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { RouteComponentProps } from '@reach/router';\n\nfunction _NotFound() {\n    return <div>Страница не найдена</div>;\n}\n\nexport const NotFound = observer<RouteComponentProps>(_NotFound);\n","import React, { useEffect } from 'react';\nimport styles from 'src/App.module.css';\nimport 'src/App.css';\nimport { AppHeader } from 'src/components/AppHeader/AppHeader';\nimport { navigate, Router } from '@reach/router';\nimport { Courses } from 'src/components/Courses/Courses';\nimport { Login } from 'src/components/Login/Login';\nimport { LocalStorageSafe } from 'src/helpers/LocalStorageSafe';\nimport { IUser, UserStore } from 'src/stores/User';\nimport { IndexPage } from 'src/components/IndexPage/IndexPage';\nimport { NotFound } from 'src/components/NotFound/NotFound';\n\nfunction App() {\n    useEffect(() => {\n        const user = LocalStorageSafe.getItem<IUser>('user');\n        if (!user) {\n            navigate('/login');\n        } else {\n            UserStore.setUser(user);\n        }\n\n        UserStore.setCheckLogin();\n    }, []);\n\n    return (\n        <div className={styles.app}>\n            <AppHeader />\n            <Router className={styles.router}>\n                <IndexPage path=\"/\" />\n                <Courses path=\"/courses\" />\n                <Login path=\"login\" />\n                <NotFound default />\n            </Router>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            },\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import { configure } from 'mobx';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport '../src/index.css';\nimport App from '../src/App';\nimport reportWebVitals from '../src/reportWebVitals';\nimport axios from 'axios';\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\nconfigure({\n    reactionScheduler(f) {\n        setTimeout(f); // https://habr.com/ru/company/mailru/blog/522312/#comment_22162136\n    },\n    enforceActions: 'never',\n});\n\naxios.defaults.baseURL = 'http://130.193.41.149/';\n\nfunction renderApp() {\n    ReactDOM.render(<App />, document.querySelector('#root'));\n}\n\nrenderApp();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__-bJlS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"courses\":\"Courses_courses__64gin\",\"course\":\"Courses_course__idhz6\",\"description\":\"Courses_description__2G3mt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"router\":\"App_router__3W9nN\"};"],"sourceRoot":""}